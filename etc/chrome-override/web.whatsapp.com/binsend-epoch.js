// module id: cbebjghfgg
function cbebjghfgg(e, t, a) {
    "use strict";
    var n = a("bfejgijfbh")
      , i = a("cfjecfhbfg")
      , r = i(a("bhfcfhafdj"))
      , o = i(a("dfadhaifh"))
      , s = i(a("cehcfaibji"))
      , d = i(a("hgjcbccfg"))
      , c = i(a("eaigijhjei"))
      , u = i(a("dajcegbdcc"))
      , l = i(a("beafbeighe"))
      , f = i(a("bjigbaghc"))
      , h = i(a("cjgfiijjee"))
      , p = i(a("bjddijedhj"))
      , g = a("ddjgcfjicj")
      , m = n(a("cajijabhgb"))
      , b = i(a("bjbdcigbdi"))
      , v = i(a("dgicehhija"))
      , j = i(a("cahfddcdga"))
      , y = i(a("bbchfgbaj"))
      , E = i(a("hcbfjecci"))
      , _ = i(a("bhggeigghg"))
      , S = i(a("jccfhaecf"))
      , A = i(a("bgeajihhc"));
    function C() {
        var e = (0,
        o.default)(["BinaryProtocol read error stack: ", ""]);
        return C = function() {
            return e
        }
        ,
        e
    }
    function M() {
        var e = (0,
        o.default)(["BinaryProtocol read error with tag ", ", size: ", ""]);
        return M = function() {
            return e
        }
        ,
        e
    }
    function T() {
        var e = (0,
        o.default)(["", ""]);
        return T = function() {
            return e
        }
        ,
        e
    }
    function P() {
        var e = (0,
        o.default)(["TODO ", ""]);
        return P = function() {
            return e
        }
        ,
        e
    }
    function N() {
        var e = (0,
        o.default)(["Wap:handle read invalid"]);
        return N = function() {
            return e
        }
        ,
        e
    }
    function O() {
        var e = (0,
        o.default)(["bin-recv:", ""]);
        return O = function() {
            return e
        }
        ,
        e
    }
    function I() {
        var e = (0,
        o.default)(["wap:handle:query unknown ", ""]);
        return I = function() {
            return e
        }
        ,
        e
    }
    function k() {
        var e = (0,
        o.default)(["bin-recv:", ""]);
        return k = function() {
            return e
        }
        ,
        e
    }
    function R() {
        var e = (0,
        o.default)(["Wap:handle action unknown ", ""]);
        return R = function() {
            return e
        }
        ,
        e
    }
    function w() {
        var e = (0,
        o.default)(["bin-recv:", ""]);
        return w = function() {
            return e
        }
        ,
        e
    }
    function L() {
        var e = (0,
        o.default)(["Wap:handle:status dropped"]);
        return L = function() {
            return e
        }
        ,
        e
    }
    function D() {
        var e = (0,
        o.default)(["Wap:handle:starredStickers dropped"]);
        return D = function() {
            return e
        }
        ,
        e
    }
    function G() {
        var e = (0,
        o.default)(["bin-recv:", ""]);
        return G = function() {
            return e
        }
        ,
        e
    }
    function U() {
        var e = (0,
        o.default)(["Wap:handle:recentStickers dropped"]);
        return U = function() {
            return e
        }
        ,
        e
    }
    function x() {
        var e = (0,
        o.default)(["bin-recv:", ""]);
        return x = function() {
            return e
        }
        ,
        e
    }
    function F() {
        var e = (0,
        o.default)(["bin-recv:", ""]);
        return F = function() {
            return e
        }
        ,
        e
    }
    function B() {
        var e = (0,
        o.default)(["Wap:handle:stickerPack dropped"]);
        return B = function() {
            return e
        }
        ,
        e
    }
    function $() {
        var e = (0,
        o.default)(["Wap:handle:action:call dropped"]);
        return $ = function() {
            return e
        }
        ,
        e
    }
    function V() {
        var e = (0,
        o.default)(["bin-recv:", ""]);
        return V = function() {
            return e
        }
        ,
        e
    }
    function H() {
        var e = (0,
        o.default)(["bin-recv:", ""]);
        return H = function() {
            return e
        }
        ,
        e
    }
    function Y() {
        var e = (0,
        o.default)(["Wap:handle:quickReply dropped"]);
        return Y = function() {
            return e
        }
        ,
        e
    }
    function K() {
        var e = (0,
        o.default)(["bin-recv:", ""]);
        return K = function() {
            return e
        }
        ,
        e
    }
    function W() {
        var e = (0,
        o.default)(["bin-recv:", ""]);
        return W = function() {
            return e
        }
        ,
        e
    }
    function q() {
        var e = (0,
        o.default)(["Wap:handle:label dropped"]);
        return q = function() {
            return e
        }
        ,
        e
    }
    function z() {
        var e = (0,
        o.default)(["bin-recv:", ""]);
        return z = function() {
            return e
        }
        ,
        e
    }
    function Q() {
        var e = (0,
        o.default)(["Wap:handle:location dropped"]);
        return Q = function() {
            return e
        }
        ,
        e
    }
    function J() {
        var e = (0,
        o.default)(["bin-recv: ", ""]);
        return J = function() {
            return e
        }
        ,
        e
    }
    function Z() {
        var e = (0,
        o.default)(["Wap:handle action mute dropped"]);
        return Z = function() {
            return e
        }
        ,
        e
    }
    function X() {
        var e = (0,
        o.default)(["Wap:handle action battery dropped"]);
        return X = function() {
            return e
        }
        ,
        e
    }
    function ee() {
        var e = (0,
        o.default)(["bin-recv: ", ""]);
        return ee = function() {
            return e
        }
        ,
        e
    }
    function te() {
        var e = (0,
        o.default)(["bin-recv: ", ""]);
        return te = function() {
            return e
        }
        ,
        e
    }
    function ae() {
        var e = (0,
        o.default)(["Wap:handle action chat dropped"]);
        return ae = function() {
            return e
        }
        ,
        e
    }
    function ne() {
        var e = (0,
        o.default)(["Wap:handle:action:contacts dropped"]);
        return ne = function() {
            return e
        }
        ,
        e
    }
    function ie() {
        var e = (0,
        o.default)(["bin-recv: ", ""]);
        return ie = function() {
            return e
        }
        ,
        e
    }
    function re() {
        var e = (0,
        o.default)(["bin-recv: ", ""]);
        return re = function() {
            return e
        }
        ,
        e
    }
    function oe() {
        var e = (0,
        o.default)(["Wap:handle action contact dropped"]);
        return oe = function() {
            return e
        }
        ,
        e
    }
    function se() {
        var e = (0,
        o.default)(["Wap:handle action ack invalid"]);
        return se = function() {
            return e
        }
        ,
        e
    }
    function de() {
        var e = (0,
        o.default)(["bin-recv: ", ""]);
        return de = function() {
            return e
        }
        ,
        e
    }
    function ce() {
        var e = (0,
        o.default)(["bin-recv: ", ""]);
        return ce = function() {
            return e
        }
        ,
        e
    }
    function ue() {
        var e = (0,
        o.default)(["Wap:handle action bc update invalid"]);
        return ue = function() {
            return e
        }
        ,
        e
    }
    function le() {
        var e = (0,
        o.default)(["Wap:handle action cmd invalid"]);
        return le = function() {
            return e
        }
        ,
        e
    }
    function fe() {
        var e = (0,
        o.default)(["bin-recv: ", ""]);
        return fe = function() {
            return e
        }
        ,
        e
    }
    function he() {
        var e = (0,
        o.default)(["Wap:handle:action keys not array: ", ""]);
        return he = function() {
            return e
        }
        ,
        e
    }
    function pe() {
        var e = (0,
        o.default)(["Wap:handle action msg no meta.add"]);
        return pe = function() {
            return e
        }
        ,
        e
    }
    function ge() {
        var e = (0,
        o.default)(["Wap:handle action msg before/after 0 msgs"]);
        return ge = function() {
            return e
        }
        ,
        e
    }
    function me() {
        var e = (0,
        o.default)(["Wap:handle action msg ", " dropped to 0"]);
        return me = function() {
            return e
        }
        ,
        e
    }
    function be() {
        var e = (0,
        o.default)(["bin-recv: ", ""]);
        return be = function() {
            return e
        }
        ,
        e
    }
    function ve() {
        var e = (0,
        o.default)(["Wap:handle action msg before/after dropped"]);
        return ve = function() {
            return e
        }
        ,
        e
    }
    function je() {
        var e = (0,
        o.default)(["Wap:handle action msg last dropped to 0"]);
        return je = function() {
            return e
        }
        ,
        e
    }
    function ye() {
        var e = (0,
        o.default)(["bin-recv: ", ""]);
        return ye = function() {
            return e
        }
        ,
        e
    }
    function Ee() {
        var e = (0,
        o.default)(["Wap:handle action msg last dropped"]);
        return Ee = function() {
            return e
        }
        ,
        e
    }
    function _e() {
        var e = (0,
        o.default)(["Wap:handle action msg relay dropped"]);
        return _e = function() {
            return e
        }
        ,
        e
    }
    function Se() {
        var e = (0,
        o.default)(["bin-recv: ", ""]);
        return Se = function() {
            return e
        }
        ,
        e
    }
    function Ae() {
        var e = (0,
        o.default)(["Wap:handle action msg relay length not 1"]);
        return Ae = function() {
            return e
        }
        ,
        e
    }
    function Ce() {
        var e = (0,
        o.default)(["Wap:handle non-preemptive response: ", ""]);
        return Ce = function() {
            return e
        }
        ,
        e
    }
    function Me() {
        var e = (0,
        o.default)(["Wap:handle unknown response type: ", ""]);
        return Me = function() {
            return e
        }
        ,
        e
    }
    function Te() {
        var e = (0,
        o.default)(["bin-recv: ", ",response,contact"]);
        return Te = function() {
            return e
        }
        ,
        e
    }
    function Pe() {
        var e = (0,
        o.default)(["bin-recv: ", ",response,chat"]);
        return Pe = function() {
            return e
        }
        ,
        e
    }
    function Ne() {
        var e = (0,
        o.default)(["Wap:groupActionsByType unknown action: ", ""]);
        return Ne = function() {
            return e
        }
        ,
        e
    }
    function Oe() {
        var e = (0,
        o.default)(["Wap:setSubProtocol unknown ", ""]);
        return Oe = function() {
            return e
        }
        ,
        e
    }
    function Ie() {
        var e = (0,
        o.default)(["wap:epochCount: ", " epoch: ", ""]);
        return Ie = function() {
            return e
        }
        ,
        e
    }
    function ke() {
        var e = (0,
        o.default)(["wap:epochRecv: NEGATIVE"]);
        return ke = function() {
            return e
        }
        ,
        e
    }
    function Re() {
        var e = (0,
        o.default)(["wap:epochCount: ", " epoch: ", ""]);
        return Re = function() {
            return e
        }
        ,
        e
    }
    var we = {
        epochCount: 0,
        epoch: 0,
        epochSend: function(e) {
            return 0 === this.epochCount && this.epoch++,
            e || this.epochCount++,
            LOG(2)(Re(), this.epochCount, this.epoch),
            this.epoch.toString()
        },
        epochRecv: function() {
            this.epochCount > 0 ? this.epochCount-- : LOG(4)(ke()),
            LOG(2)(Ie(), this.epochCount, this.epoch)
        },
        setSubProtocol: function(e) {
            if (-1 === e)
                this.BinaryProtocol = new u.default,
                this.N = this.BinaryProtocol.Node;
            else {
                if (null == e || 0 === e)
                    throw LOG(4)(Oe(), String(e)),
                    new m.UpdateImmediately("".concat(this.version, "_unknown_version"));
                this.BinaryProtocol = new c.default(e),
                this.N = this.BinaryProtocol.Node
            }
        },
        clearBPQueue: function() {
            var e = this;
            return new Promise((function(t, a) {
                e.BinaryProtocol.dropAllBecauseLogout(),
                t()
            }
            ))
        },
        upgradeProtoVersion(e) {
            if (e.BinaryProtocol instanceof u.default)
                for (var t = e.BinaryProtocol.getWriteQueue(); t.length; ) {
                    var a = t.shift()
                      , n = a.n
                      , i = a.resolve
                      , r = a.reject;
                    this.BinaryProtocol.write(n).then(i).catch(r)
                }
        },
        delete: function() {
            this.epochCount = 0,
            this.epoch = 0
        },
        cannotReachPhone: function() {
            this.epochRecv()
        },
        dropIfConditionMet: function(e, t) {
            return e.reduce((function(e, t) {
                return e || t
            }
            ), !1) ? void 0 : t
        },
        pruneUndefinedProps: function(e) {
            for (var t in e) {
                void 0 === e[t] && delete e[t]
            }
        },
        callFeatureFlagFun: function(e, t) {
            if (b.default.supportsFeature(e)) {
                for (var a = [], n = 2; n < arguments.length; n++)
                    a.push(arguments[n]);
                return this[t].apply(this, a)
            }
        },
        safeParseInt: function(e, t) {
            var a = parseInt(this.N.attr(t, e), 10);
            return Number.isNaN(a) ? void 0 : a
        },
        wrap: function(e) {
            var t = this;
            return function(a) {
                if (a && "object" == typeof a && "number" == typeof a.status && a.status >= 500)
                    return a;
                t.epochRecv(),
                e(a)
            }
        },
        wrap02: function(e) {
            return function(t) {
                if (t && "object" == typeof t && "number" == typeof t.status && t.status >= 500)
                    return t;
                e(t)
            }
        },
        binWrap: function(e, t) {
            var a = this;
            return function(n) {
                if (n && "object" == typeof n && "number" == typeof n.status) {
                    if (401 === n.status)
                        throw a.epochRecv(),
                        new g.E401;
                    if (n.status >= 500)
                        return n;
                    a.epochRecv(),
                    t(n)
                } else
                    a.epochRecv(),
                    e(n)
            }
        },
        binSend: function(e, t, a, n, i) {
            var r = this
              , o = n.epochIneligible ? a : function(e) {
                r.epochRecv(),
                a(e)
            }
            ;
            return delete n.epochIneligible,
            this.BinaryProtocol.write(t).then((function(a) {
                i.debugObj || (i.debugObj = t),
                i.metric = r.M[i.metricName],
                n.data = a,
                n.binaryOpts = i,
                A.default[e](n)
            }
            )).catch(o)
        },
        msgGetTarget: function(e) {
            return S.default.equals(e.from, f.default.me) ? e.to : e.from
        },
        thumbFromMediaXml: function(e) {
            return "raw" === this.N.attr("encoding", e) ? this.N.children(e)instanceof ArrayBuffer ? d.default.encode(this.N.children(e)) : "" : this.N.dataStr(e)
        },
        actionNode: function(e, t, a) {
            return ["action", {
                type: e,
                epoch: this.epochSend(a)
            }, t]
        },
        queryNode: function(e, t) {
            var a = e;
            return a || (a = {}),
            a.epoch = this.epochSend(),
            ["query", a, t]
        },
        responseNode: function(e, t) {
            var a = e;
            return a || (a = {}),
            a.epoch = this.epochSend(),
            ["response", a, t]
        },
        errorNode: function(e) {
            return ["error", {
                code: e.toString(),
                epoch: this.epochSend()
            }, void 0]
        },
        actionGetMeta: function(e) {
            var t = {};
            if ("action" !== this.N.tag(e))
                return t;
            var a = this.N.attr("add", e)
              , n = this.N.attr("missing", e)
              , i = this.N.attr("checksum", e);
            switch (a) {
            case "unread":
                t.unreadId = this.N.attr("index", e),
                t.unreadFromMe = "true" === this.N.attr("owner", e),
                t.unreadParticipant = this.N.attr("participant", e);
            case "after":
            case "before":
            case "last":
                t.pendingMsgsDone = "true" === this.N.attr("last", e),
                t.resume = "true" === this.N.attr("resume", e);
            case "relay":
            case "update":
                t.add = a
            }
            switch (n) {
            case "remove":
                t.missing = n
            }
            return i && (t.checksum = i),
            t
        },
        groupActionsByType: function(e) {
            var t, a, n = {};
            if (!Array.isArray(e))
                return n;
            var i = e.length;
            for (a = 0; a < i; a++)
                switch (t = e[a],
                this.N.tag(t)) {
                case "broadcast":
                    switch (this.N.attr("type", t)) {
                    case "create":
                    case "add":
                    case "remove":
                        n.msg || (n.msg = []),
                        n.msg.push(t);
                        break;
                    case "modify":
                        n.bcUpdate || (n.bcUpdate = []),
                        n.bcUpdate.push(t)
                    }
                    break;
                case "message":
                case "groups_v2":
                case "notification":
                case "call_log":
                case "security":
                    n.msg || (n.msg = []),
                    n.msg.push(t);
                    break;
                case "read":
                case "log":
                case "identity":
                    n.cmd || (n.cmd = []),
                    n.cmd.push(t);
                    break;
                case "received":
                    n.ack || (n.ack = []),
                    n.ack.push(t);
                    break;
                case "user":
                    n.contact || (n.contact = []),
                    n.contact.push(t);
                    break;
                case "contacts":
                    n.contacts || (n.contacts = []),
                    n.contacts.push(t);
                    break;
                case "chat":
                    switch (this.N.attr("type", t)) {
                    case "mute":
                        n.mute || (n.mute = []),
                        n.mute.push(t);
                        break;
                    default:
                        n.chat || (n.chat = []),
                        n.chat.push(t)
                    }
                    break;
                case "battery":
                    n.battery || (n.battery = []),
                    n.battery.push(t);
                    break;
                case "location":
                    n.location || (n.location = []),
                    n.location.push(t);
                    break;
                case "label":
                    n.label || (n.label = []),
                    n.label.push(t);
                    break;
                case "group":
                    n.group || (n.group = []),
                    n.group.push(t);
                    break;
                case "quick_reply":
                    n.quickReply || (n.quickReply = []),
                    n.quickReply.push(t);
                    break;
                case "call":
                    n.call || (n.call = []),
                    n.call.push(t);
                    break;
                case "stickerPack":
                case "sticker_pack":
                    n.stickerPack || (n.stickerPack = []),
                    n.stickerPack.push(t);
                    break;
                case "recent_stickers":
                    n.recentStickers || (n.recentStickers = []),
                    n.recentStickers.push(t);
                    break;
                case "starred_stickers":
                    n.starredStickers || (n.starredStickers = []),
                    n.starredStickers.push(t);
                    break;
                case "status":
                    n.status || (n.status = []),
                    n.status.push(t);
                    break;
                default:
                    LOG(4, !0)(Ne(), this.N.toString(t))
                }
            return n
        },
        handleResponse: function(e, t, a, n) {
            if (0 === e.indexOf("preempt"))
                switch (this.N.attr("type", t)) {
                case "chat":
                    LOG(2)(Pe(), e);
                    var i = this.N.children(t) || [];
                    if (Array.isArray(i)) {
                        for (var r = i.length, o = [], s = 0; s < r; s++) {
                            var d = this.parseChat(i[s]);
                            d && o.push(d)
                        }
                        (0,
                        l.default)([{
                            cmd: "preempt",
                            response: o,
                            binarySize: a
                        }])
                    }
                    break;
                case "contacts":
                    console.log('Handle contacts', e, t, this.N)
                    LOG(2)(Te(), e);
                    var c = this.N.children(t);
                    if (Array.isArray(c)) {
                        for (var u = c.length, f = [], h = 0; h < u; h++) {
                            var g = this.parseContact(c[h]);
                            g && f.push(g)
                        }
                        (0,
                        p.default)([{
                            cmd: "preempt",
                            checksum: this.N.attr("checksum", t),
                            response: f,
                            binarySize: a
                        }])
                    }
                    break;
                default:
                    LOG(4)(Me(), this.N.toString(t, !0))
                }
            else
                LOG(4)(Ce(), this.N.toString(t, !0))
        },
        handleActionMsg: function(e, t, a, n, i) {
            var r = n.length;
            switch (a.add) {
            case "relay":
            case "update":
                var o = this.parseMsg(n[0], "relay");
                if (1 !== r && LOG(4)(Ae()),
                o) {
                    LOG(2)(Se(), [e, "action", "msg", a.add, o.type, o.from, o.to, o.id, o.author].join(","));
                    var s = this.msgGetTarget(o);
                    (0,
                    v.default)([{
                        meta: a,
                        chat: s,
                        msg: o
                    }])
                } else
                    LOG(4)(_e());
                break;
            case "last":
                for (var d = [], c = 0; c < r; c++) {
                    var u = this.parseMsg(n[c], "last");
                    u ? d.push(u) : LOG(4)(Ee())
                }
                if (d.length > 0) {
                    LOG(2)(ye(), [e, "action", "msg", "last", n.length].join(","));
                    for (var l = {
                        recent: !0,
                        meta: a,
                        binarySize: t
                    }, f = 0; f < d.length; f++)
                        l[this.msgGetTarget(d[f])] = d[f];
                    (0,
                    v.default)([l])
                } else
                    LOG(4)(je());
                break;
            case "before":
            case "after":
            case "unread":
                if (r > 0) {
                    for (var h = [], p = 0; p < r; p++) {
                        var g = this.parseMsg(n[p], a.add);
                        g ? h.push(g) : LOG(4)(ve())
                    }
                    if (h.length > 0) {
                        var m = this.msgGetTarget(h[0]);
                        LOG(2)(be(), [e, "action", "msg", a.add, m, h.length].join(",")),
                        (0,
                        v.default)([{
                            meta: a,
                            chat: m,
                            msgs: h,
                            binarySize: t
                        }])
                    } else
                        LOG(4)(me(), a.add)
                } else
                    LOG(4)(ge());
                break;
            default:
                LOG(4)(pe())
            }
        },
        handleAction: function(e, t, n, i) {
            var o = this.actionGetMeta(t)
              , d = this.groupActionsByType(this.N.children(t))
              , c = Object.keys(d);
            if (Array.isArray(c)) {
                var u = c.length;
                if (0 !== u || "last" !== o.add)
                    for (var f = 0; f < u; f++) {
                        var g = c[f]
                          , m = d[g]
                          , S = m.length;
                        switch (g) {
                        case "msg":
                            this.handleActionMsg(e, n, o, m, t);
                            break;
                        case "cmd":
                            for (var A = 0; A < S; A++) {
                                var C = this.parseCmd(m[A]);
                                if (C) {
                                    var M = (0,
                                    s.default)(C).join(",");
                                    LOG(2)(fe(), [e, "action", "cmd", M].join(",")),
                                    a("dhggbbghfb").handle([C])
                                } else
                                    LOG(4)(le())
                            }
                            break;
                        case "bcUpdate":
                            for (var T = [], P = 0; P < S; P++) {
                                var N = this.parseBCUpdate(m[P]);
                                N ? T.push(N) : LOG(4)(ue())
                            }
                            LOG(2)(ce(), [e, "action", "bcUpdate", T.length].join(",")),
                            T.length > 0 && _.default.GroupMetadata.handle(T);
                            break;
                        case "ack":
                            for (var O = 0; O < S; O++) {
                                var I = this.parseAck(m[O]);
                                I ? (LOG(2)(de(), [e, "action", "ack", I.to, I.id, I.ack].join(",")),
                                (0,
                                v.default)([I])) : LOG(4)(se())
                            }
                            break;
                        case "contact":
                            for (var k = [], pe = 0; pe < S; pe++) {
                                var ge = this.parseContact(m[pe]);
                                ge ? k.push(ge) : LOG(4)(oe())
                            }
                            if (LOG(2)(re(), [e, "action", "contact", k.length, o.missing].join(",")),
                            k.length > 0) {
                                var me = [k];
                                (o.missing || o.checksum) && me.push(o),
                                (0,
                                p.default)(me)
                            }
                            break;
                        case "contacts":
                            var be = this.parseContacts(m[0]);
                            LOG(2)(ie(), [e, "action", "contacts"].join(",")),
                            be ? (0,
                            p.default)([be]) : LOG(4)(ne());
                            break;
                        case "chat":
                            for (var ve = [], je = 0; je < S; je++) {
                                var ye = this.parseChat(m[je]);
                                ye ? ve.push(ye) : LOG(4)(ae())
                            }
                            LOG(2)(te(), [e, "action", "chat", ve.length].join(",")),
                            ve.length > 0 && (0,
                            l.default)([ve]);
                            break;
                        case "battery":
                            var Ee = this.parseBattery(m[0]);
                            Ee ? (LOG(2)(ee(), [e, "action", "battery", Ee.battery, Ee.plugged].join(",")),
                            (0,
                            h.default)([Ee])) : LOG(4)(X());
                            break;
                        case "mute":
                            for (var _e = [], Se = 0; Se < S; Se++) {
                                var Ae = this.parseChat(m[Se]);
                                Ae ? _e.push(Ae) : LOG(4)(Z())
                            }
                            LOG(2)(J(), [e, "action", "mute", _e.length].join(",")),
                            _e.length > 0 && _.default.Mute.handle(_e);
                            break;
                        case "location":
                            for (var Ce = [], Me = 0; Me < S; Me++) {
                                var Te = this.parseLocation(m[Me]);
                                Te ? Ce.push(Te) : LOG(4)(Q()),
                                LOG(2)(z(), [e, "action,location", Ce.length].join()),
                                Ce.length > 0 && _.default.LiveLocation.handle(Ce)
                            }
                            break;
                        case "label":
                            for (var Pe = [], Ne = 0; Ne < S; Ne++) {
                                var Oe = this.callFeatureFlagFun(b.default.F.LABELS_DISPLAY, "parseLabel", m[Ne]);
                                Oe ? Pe.push(Oe) : LOG(4)(q()),
                                LOG(2)(W(), [e, "action,label", Pe.length].join()),
                                Pe.length > 0 && _.default.Label.handle({
                                    checksum: o.checksum,
                                    labels: Pe
                                })
                            }
                            break;
                        case "group":
                            for (var Ie = 0; Ie < S; Ie++) {
                                var ke = this.callFeatureFlagFun(b.default.F.GROUPS_V_4_JOIN_PERMISSION, "parseInviteUpdate", m[Ie]);
                                LOG(2)(K(), [e, "action,group_v4_pending_invites", ke && ke.length].join()),
                                void 0 !== ke && _.default.GroupMetadata.handlePendingInvite({
                                    gid: ke.gid,
                                    participants: ke.participants
                                })
                            }
                            break;
                        case "quickReply":
                            for (var Re = [], we = 0; we < S; we++) {
                                var Le = this.callFeatureFlagFun(b.default.F.QUICK_REPLIES_QUERY, "parseQuickReply", m[we]);
                                Le ? Re.push(Le) : LOG(4)(Y()),
                                LOG(2)(H(), [e, "action,quickReply", Re.length].join()),
                                Re.length > 0 && _.default.QuickReply.handle({
                                    checksum: o.checksum,
                                    quickReplies: Re
                                })
                            }
                            break;
                        case "call":
                            var De = this.callFeatureFlagFun(b.default.F.VOIP_INDIVIDUAL_INCOMING, "parseCall", m[0]);
                            LOG(2)(V(), [e, "action", "call"].join()),
                            De ? _.default.Call.handle([De]) : LOG(4)($());
                            break;
                        case "stickerPack":
                        case "sticker_pack":
                            for (var Ge = [], Ue = 0; Ue < S; Ue++) {
                                var xe = this.callFeatureFlagFun(b.default.F.STICKER_PACK_QUERY, "parseStickerPackUpdate", m[Ue]);
                                xe ? (Ge.push(xe),
                                _.default.StickerPack.sync(o.checksum)) : LOG(4)(B()),
                                LOG(2)(F(), [e, "action,stickerPack", Ge.length].join())
                            }
                            break;
                        case "recentStickers":
                            if (b.default.isRecentStickersEnabled())
                                for (var Fe = 0; Fe < S; Fe++) {
                                    var Be = (0,
                                    y.default)(m[Fe], this.N);
                                    Be ? (_.default.RecentSticker.setChecksum(o.checksum),
                                    _.default.RecentSticker.remove(Be),
                                    LOG(2)(x(), [e, "action,recentStickers", Be].join())) : LOG(4)(U())
                                }
                            break;
                        case "starredStickers":
                            if (b.default.isStarredStickersEnabled())
                                for (var $e = 0; $e < S; $e++) {
                                    var Ve = (0,
                                    E.default)(m[$e], this.N);
                                    if (Ve) {
                                        var He = Ve.type
                                          , Ye = Ve.filehash
                                          , Ke = Ve.sticker;
                                        switch (He) {
                                        case "add":
                                            _.default.StarredSticker.add((0,
                                            j.default)(Ke), {
                                                at: 0
                                            }, !0);
                                            break;
                                        case "delete":
                                            _.default.StarredSticker.remove(Ye)
                                        }
                                        LOG(2)(G(), [e, "action,starredStickers", He, Ye].join())
                                    } else
                                        LOG(4)(D())
                                }
                            break;
                        case "status":
                            for (var We = [], qe = 0; qe < S; qe++) {
                                var ze = this.callFeatureFlagFun(b.default.F.STATUS_RANKING, "parseStatusRankingScores", m[qe]);
                                ze && ze.length ? We.push.apply(We, (0,
                                r.default)(ze)) : LOG(4)(L()),
                                LOG(2)(w(), [e, "action,status", We.length].join()),
                                We.length > 0 && _.default.StatusV3.handle([{
                                    type: "score",
                                    scores: We
                                }])
                            }
                            break;
                        default:
                            LOG(4)(R(), g)
                        }
                    }
                else
                    (0,
                    v.default)([{
                        recent: !0,
                        meta: o,
                        binarySize: n
                    }])
            } else
                LOG(4)(he(), typeof c)
        },
        handleQuery: function(e, t, a) {
            var n = this
              , i = this.N.children(t);
            if (Array.isArray(i))
                for (var r = function(t) {
                    var a = i[t]
                      , r = n.N.tag(a);
                    LOG(2)(k(), [e, "query", r].join());
                    var o = void 0;
                    switch (r) {
                    case "call":
                        o = n.callFeatureFlagFun(b.default.F.VOIP_INDIVIDUAL_INCOMING, "handleCallQuery", a);
                        break;
                    default:
                        LOG(4)(I(), r)
                    }
                    o || (o = Promise.resolve(n.errorNode(501))),
                    o.then((function(t) {
                        n.BinaryProtocol.write(t).then((function(a) {
                            A.default.send({
                                tag: e,
                                data: a,
                                onSend: n.wrap((function() {}
                                )),
                                onDrop: n.wrap((function() {}
                                )),
                                retryOn5xx: !0,
                                binaryOpts: {
                                    debugString: ["response", r].join(),
                                    debugObj: t,
                                    metricName: "QUERY_RESPONSE",
                                    ackRequest: !0
                                }
                            })
                        }
                        )).catch((function(e) {
                            n.epochRecv()
                        }
                        ))
                    }
                    ))
                }, o = 0; o < i.length; o++)
                    r(o)
        },
        handle: function(e, t, n, i) {
            var r = this;
            return this.BinaryProtocol.read(e).then((function(e) {
                switch (r.N.tag(e)) {
                    case "response":
                    r.handleResponse(n, e, i, t);
                    break;
                case "action":
                    r.handleAction(n, e, i, t);
                    break;
                case "query":
                    r.handleQuery(n, e, i);
                    break;
                case "read":
                    var o = r.parseCmd(e);
                    if (o) {
                        var d = (0,
                        s.default)(o).join();
                        LOG(2)(O(), [n, "action", d].join()),
                        a("dhggbbghfb").handle([o])
                    } else
                        LOG(4)(N());
                    break;
                default:
                    LOG(4, !0)(P(), r.N.toString(e, !0))
                }
                return !0
            }
            )).catch(g.LogoutDrop, (function(e) {
                LOG(4)(T(), e.toString())
            }
            )).catch((function(e) {
                throw LOG(1)(M(), n, i),
                LOG(1)(C(), e.stack || ""),
                new Error("BinaryProtocol read error: ".concat(e))
            }
            ))
        }
    };
    e.exports = we
}